var systemConfiguration={$addType:$(".type_add"),$emptyBtn:$(".emptyBtn"),$modifyAdd:$("#eventTypeAdd"),$modifyclear:$("#clearTemplate"),$modifyedit:$("#eventTypeEdit"),$addBtn:$("#addType"),$modifyBtn:$("#modifyType"),_data:null,_systemData:null,_typeId:"",_modifyId:null,_verifiCode:null,init:function(){var e=this;$(".aTitle ul li").each(function(e){$(this).click(function(){$(this).attr("class","active").siblings("li").attr("class",""),$("div.template").eq(e).show().siblings("div").hide()})}),e.initialization(),this.$addType.click(function(){if($(".addEventTypeName .REGname").text(""),$(".addEventTypeSymbol .REGsymbol").text(""),$(".addEventTypeName").find("input[name=typeName]").val(""),$("#eventTypeAdd .pictureBox ul li").removeClass("selected"),"保存顺序"==$(".modify_order span").text()){var t={tip:"您是否放弃顺序调整的修改操作？",name_title:"提示",name_cancel:"否",name_confirm:"是",isCancelBtnShow:!0,callBack:function(){$(".modify_order span").text("修改顺序"),$(".modify_order").addClass("bgBlue").removeClass("bgRed"),""!=e._typeId?(e.typeListRend(e._typeId),$("#radioGroup").closest(".form_radio").hide(),$("#radioGroup").prop("disabled",!0).closest(".pay_list_c1").removeClass("on"),$("#radioType").prop("checked",!0).closest(".pay_list_c1").addClass("on"),$(".addEventTypeName .list_l").html("<i>*</i>事件类型名称："),$(".addEventTypeSymbol").hide()):(e.typeListRend("0"),$("#radioGroup").closest(".form_radio").show(),$(".addEventTypeSymbol ul li").eq(0).addClass("selected"),$("#radioGroup").prop("disabled",!1).prop("checked",!0).closest(".pay_list_c1").addClass("on"),$("#radioType").closest(".pay_list_c1").removeClass("on"),$(".addEventTypeName .list_l").html("<i>*</i>事件组名称："),$(".addEventTypeSymbol .list_l").html("<i>*</i>事件组符号："),$(".addEventTypeSymbol").show()),e.$modifyAdd.modal()}};xxwsWindowObj.xxwsAlert(t)}else""!=e._typeId?($("#radioGroup").closest(".form_radio").hide(),$("#radioGroup").prop("disabled",!0).closest(".pay_list_c1").removeClass("on"),$("#radioType").prop("checked",!0).closest(".pay_list_c1").addClass("on"),$(".addEventTypeName .list_l").html("<i>*</i>事件类型名称："),$(".addEventTypeSymbol").hide()):($("#radioGroup").closest(".form_radio").show(),$(".addEventTypeSymbol ul li").eq(0).addClass("selected"),$("#radioGroup").prop("disabled",!1).prop("checked",!0).closest(".pay_list_c1").addClass("on"),$("#radioType").closest(".pay_list_c1").removeClass("on"),$(".addEventTypeName .list_l").html("<i>*</i>事件组名称："),$(".addEventTypeSymbol .list_l").html("<i>*</i>事件组符号："),$(".addEventTypeSymbol").show()),e.$modifyAdd.modal()}),this.$emptyBtn.click(function(){$(".clearValidationCode").find("input[name=prompt]").val(""),$(".errorPrompt").hide(),e.imgCode(),e.$modifyclear.modal()}),this.$addBtn.click(function(){e.addType()}),e.$modifyBtn.click(function(){e.modifyType(e._modifyId)}),$("body").on("click",".move_up",function(e){var t=$(this).closest("li"),i=t.find("input[name=typeNum]").val();if(0!=t.index()){var a=t.prev();t.find("input[name=typeNum]").val(a.find("input[name=typeNum]").val()),t.find(".clildren_order").text(t.index()),a.find("input[name=typeNum]").val(i),a.find(".clildren_order").text(t.index()+1),t.prev().before(t)}}),$("body").on("click",".move_down",function(e){var t=$(this).closest("li"),i=t.find("input[name=typeNum]").val();if(t.index()!=$(".move_down").length-1){var a=t.next();t.find("input[name=typeNum]").val(a.find("input[name=typeNum]").val()),t.find(".clildren_order").text(t.index()+2),a.find("input[name=typeNum]").val(i),a.find(".clildren_order").text(t.index()+1),t.next().after(t)}}),$("body").on("click",".modifyed",function(t){if($(".modifyText .REGname").text(""),$(".modifyText").find("input[name=typeName]").val($(this).closest("li").find(".children_typeName").text()),$("#eventTypeEdit .pictureBox ul li").removeClass("selected"),""!=e._typeId)$(".editEventTypeSymbol").hide();else{$(".editEventTypeSymbol").show();for(var i=$(this).closest("li").find("span.children_pic").attr("data-img"),a=$("#eventTypeEdit .pictureBox ul li"),s=0;s<a.length;s++)a.eq(s).attr("data-src")==i&&a.eq(s).addClass("selected")}"2"==$(this).closest("li").find("span.children_pic").attr("data-node")?($("#eventTypeEdit .modifyText .list_l").html("<i>*</i>事件组名称："),$("#eventTypeEdit .editEventTypeSymbol .list_l").html("<i>*</i>事件组符号：")):($("#eventTypeEdit .modifyText .list_l").html("<i>*</i>事件类型名称："),$("#eventTypeEdit .editEventTypeSymbol .list_l").html("<i>*</i>事件类型符号：")),e.$modifyedit.modal(),e._modifyId=$(this).closest("li").find("input[name=typeId]").val()}),$("body").on("click",".deleted",function(t){var i=$(this).closest("li").find("input[name=typeId]").val(),a={tip:"您是否确认删除该类型？",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!0,callBack:function(){e.deteleType(i)}};xxwsWindowObj.xxwsAlert(a)}),$("body").on("click",".modify_order",function(t){$(".child_list").find("li").length>0&&("保存顺序"==$(this).find("span").text()?($(".modify_order").addClass("bgBlue").removeClass("bgRed"),$(".move").addClass("move_uped").removeClass("move_up"),$(".down").addClass("move_downed").removeClass("move_down"),$(".modify").addClass("modifyed").removeClass("modifyedClose"),$(".delete").addClass("deleted").removeClass("deletedClose"),$(this).find("span").text("修改顺序"),e.saveOrder()):($(".modify_order").addClass("bgRed").removeClass("bgBlue"),$(".move").addClass("move_up").removeClass("move_uped"),$(".down").addClass("move_down").removeClass("move_downed"),$(".modify").addClass("modifyedClose").removeClass("modifyed"),$(".delete").addClass("deletedClose").removeClass("deleted"),$(this).find("span").text("保存顺序")))}),$(".systemTitle .customImg").click(function(e){$(this).hasClass("customImg1")?($(this).removeClass("customImg1").addClass("customImg2"),$(".systemTypeTree").hide()):($(this).removeClass("customImg2").addClass("customImg1"),$(".systemTypeTree").show()),e.stopPropagation()}),$(".customTitle .customImg").click(function(e){$(this).hasClass("customImg1")?($(this).removeClass("customImg1").addClass("customImg2"),$(".customTypeTree").hide()):($(this).removeClass("customImg2").addClass("customImg1"),$(".customTypeTree").show()),e.stopPropagation()}),$("body").on("click",".status",function(e){$(this).hasClass("openType")?($(this).removeClass("openType").addClass("closeType"),$(this).closest("li").find(".eventChildTree").hide()):($(this).removeClass("closeType").addClass("openType"),$(this).closest("li").find(".eventChildTree").show()),e.stopPropagation()}),$("body").on("click",".customTitle",function(){var t=$(this);if("保存顺序"==$(".modify_order span").text()){var i={tip:"您是否放弃顺序调整的修改操作？",name_title:"提示",name_cancel:"否",name_confirm:"是",isCancelBtnShow:!0,callBack:function(){$(".modify_order span").text("修改顺序"),$(".modify_order").addClass("bgBlue").removeClass("bgRed"),$(".customTemplateRend").removeClass("active"),t.addClass("active"),e.typeListRend("0"),e._typeId=""}};xxwsWindowObj.xxwsAlert(i)}else $(".customTemplateRend").removeClass("active"),t.addClass("active"),e.typeListRend("0"),e._typeId=""}),$("body").on("click",".systemTitle",function(){$(".systemTemplateRend").removeClass("active"),$(this).addClass("active"),e.systemTypeListRend("0")}),$("body").on("click",".customTemplateRend",function(){var t=$(this),i=$(this).attr("dataid");if("保存顺序"==$(".modify_order span").text()){var a={tip:"您是否放弃顺序调整的修改操作？",name_title:"提示",name_cancel:"否",name_confirm:"是",isCancelBtnShow:!0,callBack:function(){$(".modify_order span").text("修改顺序"),$(".modify_order").addClass("bgBlue").removeClass("bgRed"),$(".customTitle").removeClass("active"),t.addClass("active"),t.closest("li").siblings("li").find(".eventTitle").removeClass("active"),e._typeId=i,e.typeListRend(i)}};xxwsWindowObj.xxwsAlert(a)}else $(".customTitle").removeClass("active"),t.addClass("active"),t.closest("li").siblings("li").find(".eventTitle").removeClass("active"),e._typeId=i,e.typeListRend(i)}),$("body").on("click",".systemTemplateRend",function(){$(".systemTitle").removeClass("active"),$(this).addClass("active"),$(this).closest("li").siblings("li").find(".eventTitle").removeClass("active");var t=$(this).attr("dataid");e.systemTypeListRend(t)}),$("body").on("click",".defaultBtnSystem",function(){var t={tip:"您是否启用当前模板为事件类型模板？",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!0,callBack:function(){e.defaultTemplate("0"),$(".systemButton").find("span").removeClass("defaultBtnSystem"),$(".customButton").find("span").addClass("defaultBtnCustom"),1==zhugeSwitch&&zhuge.track("设置系统模板为默认")}};xxwsWindowObj.xxwsAlert(t)}),$("body").on("click",".defaultBtnCustom",function(){var t={tip:"您是否启用当前模板为事件类型模板？",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!0,callBack:function(){e.defaultTemplate("1"),$(".customButton").find("span").removeClass("defaultBtnCustom"),$(".systemButton").find("span").addClass("defaultBtnSystem"),1==zhugeSwitch&&zhuge.track("设置自定义模板为默认")}};xxwsWindowObj.xxwsAlert(t)}),$("#clearTypeTemplate").click(function(){var t=$(".clearValidationCode").find("input[name=prompt]").val().trim(),i=e._verifiCode,a=new RegExp("^"+i+"$","gi");return""==t||null==t?($(".errorPrompt").show(),$(".errorPrompt span").text("请填写图片验证码"),!1):a.test(t)?($(".errorPrompt").hide(),void e.clearTemplate()):($(".errorPrompt").show(),$(".errorPrompt span").text("图片验证码填写错误"),!1)}),$(".code").click(function(){e.imgCode()}),$(".pay_list_c1").each(function(e){$(this).click(function(){var e=$(this).find("input[name=nodeType]").val();$(this).find("input[name=nodeType]").prop("disabled")||("2"==e?($(".addEventTypeName .list_l").html("<i>*</i>事件组名称："),$(".addEventTypeSymbol .list_l").html("<i>*</i>事件组符号：")):($(".addEventTypeName .list_l").html("<i>*</i>事件类型名称："),$(".addEventTypeSymbol .list_l").html("<i>*</i>事件类型符号：")),$(".pay_list_c1").removeClass("on"),$(this).addClass("on"),$(this).find("input[type='radio']").prop("checked",!0))})}),$(".pictureBox ul li").click(function(){$(this).siblings("li").removeClass("selected"),$(this).addClass("selected")})},typeListRend:function(e){var t=this;$(".child_list").html("");var a="";if("0"!=e){a=Enumerable.From(t._data).Where(function(t){return t.objectId==""+e}).ToArray()[0].iconName}var s=Enumerable.From(t._data).Where(function(t){return t.parentId==""+e&&1==t.active}).OrderBy(function(e){return e.indexNum}).ToArray();if(s.length>0)for(i=0;i<s.length;i++){var n=s[i].indexNum,l=s[i].id,d=s[i].iconName,o=s[i].typeName,c="";c="0"==e?'<li><input type="hidden" name="typeId" value="'+l+'" /><input type="hidden" name="typeNum" value="'+n+'" /><span class="clildren_order ellipsis">'+(i+1)+'</span><span class="children_pic" data-node="'+s[i].nodeType+'" data-img="'+d+'"><img src="/src/images/common/eventTypeImg/'+d+' "></span><span class="children_typeName ellipsis">'+o+'</span><span class="children_operation"><i class="delete deleted" title="删除"></i><i class="modify modifyed" title="修改"></i><i class="down move_downed" title="下移"></i><i class="move move_uped" title="上移"></i></span></li>':'<li><input type="hidden" name="typeId" value="'+l+'" /><input type="hidden" name="typeNum" value="'+n+'" /><span class="clildren_order ellipsis">'+(i+1)+'</span><span class="children_pic" data-node="'+s[i].nodeType+'" data-img="'+a+'"><img src="/src/images/common/eventTypeImg/'+a+' "></span><span class="children_typeName ellipsis">'+o+'</span><span class="children_operation"><i class="delete deleted" title="删除"></i><i class="modify modifyed" title="修改"></i><i class="down move_downed" title="下移"></i><i class="move move_uped" title="上移"></i></span></li>',$(".child_list").append(c)}else $(".child_list").html("<li style='text-align:center'>暂无数据</li>")},systemTypeListRend:function(e){var t=this;$(".systemChild_list").html("");var a="";if("0"!=e){a=Enumerable.From(t._systemData).Where(function(t){return t.objectId==""+e}).ToArray()[0].iconName}var s=Enumerable.From(t._systemData).Where(function(t){return t.parentId==""+e&&1==t.active}).OrderBy(function(e){return e.indexNum}).ToArray();if(s.length>0)for(i=0;i<s.length;i++){var n=s[i].typeName,l=s[i].iconName,d="";d="0"==e?'<li><span class="clildren_order ellipsis">'+(i+1)+'</span><span class="children_pic" data-img="'+l+'"><img src="/src/images/common/eventTypeImg/'+l+' "></span><span class="children_typeName ellipsis">'+n+"</span></li>":'<li><span class="clildren_order ellipsis">'+(i+1)+'</span><span class="children_pic" data-img="'+a+'"><img src="/src/images/common/eventTypeImg/'+a+' "></span><span class="children_typeName ellipsis">'+n+"</span></li>",$(".systemChild_list").append(d)}else $(".systemChild_list").html("<li style='text-align:center'>暂无数据</li>")},saveOrder:function(){for(var e=this,t=$(".child_list").find("li"),i=[],a=0;a<t.length;a++){var s={id:t.eq(a).find("input[name=typeId]").val(),indexNum:t.eq(a).find("input[name=typeNum]").val()};i.push(s)}$.ajax({type:"POST",url:"/cloudlink-inspection-event/eventType/updateCustomEventTypeOrder?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(i),dataType:"json",success:function(t){if(1==t.success){var i={tip:"修改顺序成功",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!1,callBack:function(){e.getAllData()}};xxwsWindowObj.xxwsAlert(i)}else xxwsWindowObj.xxwsAlert("修改顺序失败")},error:function(){xxwsWindowObj.xxwsAlert("修改顺序失败")}})},getAllData:function(){var e=this,t={type:"1"};$.ajax({type:"POST",url:"/cloudlink-inspection-event/commonData/customOrSysEventType/getList?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(t),dataType:"json",success:function(t){1==t.success?(e._data=t.rows,e.renderEventType(e._data),e.addActive()):xxwsWindowObj.xxwsAlert("获取数据失败")},error:function(){xxwsWindowObj.xxwsAlert("获取数据失败")}})},renderEventType:function(e){$(".customTypeTree").html("");for(var t=Enumerable.From(e).Where(function(e){return"0"==e.parentId&&1==e.active}).OrderBy(function(e){return e.indexNum}).ToArray(),i=0;i<t.length;i++){var a=t[i].active,s=t[i].objectId,n="",l="",d=Enumerable.From(e).Where(function(e){return e.parentId==""+s&&1==e.active}).OrderBy(function(e){return e.indexNum}).ToArray();for(d.length>0&&(l="openType"),j=0;j<d.length;j++){n+='<li><span class="fl bgType"></span><span class="fl ellipsis">'+d[j].typeName+"</span></li>"}"1"==t[i].nodeType?divText="<div dataid="+s+"  dataActive="+a+' class="eventTitleType"><span class="fl bgType"></span><span class="fl ellipsis">'+t[i].typeName+'</span><span class="fr pr10 status '+l+'"></span></div>':"2"==t[i].nodeType&&(divText="<div dataid="+s+"  dataActive="+a+' class="eventTitle customTemplateRend"><span class="fl bgGroup"></span><span class="fl ellipsis">'+t[i].typeName+'</span><span class="fr pr10 status '+l+'"></span></div>');var o="<li>"+divText+'<ul class="eventChildTree">'+n+"</ul></li>";$(".customTypeTree").append(o)}},getSystemData:function(){var e=this,t={type:"0"};$.ajax({type:"POST",url:"/cloudlink-inspection-event/commonData/customOrSysEventType/getList?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(t),dataType:"json",success:function(t){1==t.success?(e._systemData=t.rows,e.renderSystemTree(e._systemData)):xxwsWindowObj.xxwsAlert("获取数据失败")},error:function(){xxwsWindowObj.xxwsAlert("获取数据失败")}})},renderSystemTree:function(e){$(".systemTypeTree").html("");for(var t=Enumerable.From(e).Where(function(e){return"0"==e.parentId&&1==e.active}).OrderBy(function(e){return e.indexNum}).ToArray(),i=0;i<t.length;i++){var a=t[i].active,s=t[i].objectId,n="",l="",d=Enumerable.From(e).Where(function(e){return e.parentId==""+s&&1==e.active}).OrderBy(function(e){return e.indexNum}).ToArray();for(d.length>0&&(l="openType"),j=0;j<d.length;j++){n+='<li><span class="fl bgType"></span><span class="fl ellipsis">'+d[j].typeName+"</span></li>"}"1"==t[i].nodeType?divText="<div dataid="+s+"  dataActive="+a+' class="eventTitleType"><span class="fl bgType"></span><span class="fl ellipsis">'+t[i].typeName+'</span><span class="fr pr10 status '+l+'"></span></div>':"2"==t[i].nodeType&&(divText="<div dataid="+s+"  dataActive="+a+' class="eventTitle systemTemplateRend"><span class="fl bgGroup"></span><span class="fl ellipsis">'+t[i].typeName+'</span><span class="fr pr10 status '+l+'"></span></div>');var o="<li>"+divText+'<ul class="eventChildTree">'+n+"</ul></li>";$(".systemTypeTree").append(o)}this.systemTypeListRend("0")},addActive:function(){var e=this;if(""==e._typeId)e.typeListRend("0"),$(".customTitle").addClass("active"),$(".customTemplateRend").removeClass("active");else{e.typeListRend(e._typeId),$(".customTitle").removeClass("active"),$(".customTemplateRend").removeClass("active");for(var t=$(".customTemplateRend"),i=0;i<t.length;i++)t.eq(i).attr("dataid")==e._typeId&&t.eq(i).addClass("active")}},imgCode:function(){var e="",t=["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m","0","1","2","3","4","5","6","7","8","9","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"];e=t[parseInt(1e4*Math.random()%62)]+t[parseInt(1e4*Math.random()%62)]+t[parseInt(1e4*Math.random()%62)]+t[parseInt(1e4*Math.random()%62)],$(".code i").text(e),this._verifiCode=e},addType:function(){var e=this,t="0",i=/^.{2,10}$/,a=$(".addEventTypeName").find("input[name=typeName]").val().trim(),s=$('input:radio[name="nodeType"]:checked').val(),n=baseOperation.createuuid(),l=baseOperation.createuuid();if(""==a||null==a)return $(".addEventTypeName .REGname").text("*请填写类型名称"),!1;if(!i.test(a))return $(".addEventTypeName .REGname").text("*类型名称为2-10个字符"),!1;$(".addEventTypeName .REGname").text("");var d="";if(""==e._typeId){for(var o=$("#eventTypeAdd .pictureBox ul li"),c=0;c<o.length;c++)o.eq(c).hasClass("selected")&&(d=o.eq(c).attr("data-src"));if(""==d)return $(".addEventTypeSymbol .REGsymbol").text("请选择类型符号"),!1;$(".addEventTypeSymbol .REGsymbol").text("")}else t=e._typeId;$("#addType").attr("disabled","disabled");var r={id:n,objectId:l,typeName:a,parentId:t,iconName:d,nodeType:s};$.ajax({type:"POST",url:"/cloudlink-inspection-event/eventType/saveCustomEventType?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(r),dataType:"json",success:function(t){if(1==t.success){e.$modifyAdd.modal("hide");var i={tip:"新增事件类型成功",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!1,callBack:function(){e.getAllData()}};xxwsWindowObj.xxwsAlert(i)}else if("XE02001"==t.code)xxwsWindowObj.xxwsAlert("该事件类型名称已经存在，无法添加");else if("XE02002"==t.code){var a=t.rows[0].id,i={tip:"该事件类型名称曾被使用，后被用户删除，其已存在于历史数据中，是否对其进行恢复？",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!0,callBack:function(){e.$modifyAdd.modal("hide"),e.recoveryType(a)}};xxwsWindowObj.xxwsAlert(i)}else xxwsWindowObj.xxwsAlert("新增事件类型失败");$("#addType").removeAttr("disabled")},error:function(){$("#addType").removeAttr("disabled"),xxwsWindowObj.xxwsAlert("")}})},recoveryType:function(e){var t=this,i={id:e};$.ajax({type:"POST",url:"/cloudlink-inspection-event/eventType/recoveryCustomEventType?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(i),dataType:"json",success:function(e){if(1==e.success){var i={tip:"恢复事件类型成功",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!1,callBack:function(){t.getAllData()}};xxwsWindowObj.xxwsAlert(i)}else xxwsWindowObj.xxwsAlert("恢复事件类型失败")},error:function(){xxwsWindowObj.xxwsAlert("恢复事件类型失败")}})},modifyType:function(e){var t=this,i=/^.{2,10}$/,a=$(".modifyText").find("input[name=typeName]").val().trim();$(".editEventTypeSymbol").find("textarea[name=typeSymbol]").val();if(""==a||null==a)return $(".modifyText .REGname").text("*请填写类型名称"),!1;if(!i.test(a))return $(".modifyText .REGname").text("*类型名称为2-10个字符"),!1;$(".modifyText .REGname").text("");var s="";if(""==t._typeId)for(var n=$("#eventTypeEdit .pictureBox ul li"),l=0;l<n.length;l++)n.eq(l).hasClass("selected")&&(s=n.eq(l).attr("data-src"));$("#modifyType").attr("disabled","disabled");var d={id:e,typeName:a,iconName:s};$.ajax({type:"POST",url:"/cloudlink-inspection-event/eventType/updateCustomEventType?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(d),dataType:"json",success:function(e){if(1==e.success){t.$modifyedit.modal("hide");var i={tip:"修改事件类型成功",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!1,callBack:function(){t.getAllData()}};xxwsWindowObj.xxwsAlert(i)}else"XE02001"==e.code?xxwsWindowObj.xxwsAlert("该事件类型名称已经存在，无法修改"):"XE02002"==e.code?xxwsWindowObj.xxwsAlert("您所修改的事件类型名称已存在于历史类型中，无法修改！"):xxwsWindowObj.xxwsAlert("修改事件类型失败");$("#modifyType").removeAttr("disabled")},error:function(){xxwsWindowObj.xxwsAlert("修改事件类型失败"),$("#modifyType").removeAttr("disabled")}})},deteleType:function(e){var t=this,i={id:e};$.ajax({type:"POST",url:"/cloudlink-inspection-event/eventType/deleteCustomEventType?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(i),dataType:"json",success:function(e){if(1==e.success){var i={tip:"事件类型删除成功",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!1,callBack:function(){t.getAllData()}};xxwsWindowObj.xxwsAlert(i)}else xxwsWindowObj.xxwsAlert("事件类型删除失败")},error:function(){xxwsWindowObj.xxwsAlert("事件类型删除失败")}})},clearTemplate:function(){var e=this;$.ajax({type:"GET",url:"/cloudlink-inspection-event/eventType/cleanCustomTemplate?token="+lsObj.getLocalStorage("token"),contentType:"application/json",dataType:"json",success:function(t){if(e.$modifyclear.modal("hide"),1==t.success){e._typeId="";var i={tip:"清除模板成功",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!1,callBack:function(){e.getAllData()}};xxwsWindowObj.xxwsAlert(i)}else xxwsWindowObj.xxwsAlert("清除模板失败")},error:function(){xxwsWindowObj.xxwsAlert("清除模板失败")}})},initialization:function(){var e=this;$.ajax({type:"GET",url:"/cloudlink-inspection-event/eventType/currentTemplate?token="+lsObj.getLocalStorage("token"),contentType:"application/json",dataType:"json",success:function(t){if(1==t.success){var i=t.rows[0].options;"0"==i?($(".customButton").find("span").addClass("defaultBtnCustom"),$(".aTitle ul li").eq(0).text("系统模板（默认）").attr("class","active"),$(".aTitle ul li").eq(1).text("自定义模板"),$("div.template").eq(0).show().siblings("div").hide()):"1"==i&&($(".systemButton").find("span").addClass("defaultBtnSystem"),$(".aTitle ul li").eq(1).text("自定义模板（默认）").attr("class","active"),$(".aTitle ul li").eq(0).text("系统模板"),$("div.template").eq(1).show().siblings("div").hide()),e.getAllData(),e.getSystemData()}else xxwsWindowObj.xxwsAlert("获取数据失败")},error:function(){xxwsWindowObj.xxwsAlert("获取数据失败")}})},defaultTemplate:function(e){var t=this,i={options:e};$.ajax({type:"POST",url:"/cloudlink-inspection-event/eventType/setEventTypeTemplate?token="+lsObj.getLocalStorage("token"),contentType:"application/json",data:JSON.stringify(i),dataType:"json",success:function(i){if(1==i.success){var a={tip:"设置默认模板成功",name_title:"提示",name_cancel:"取消",name_confirm:"确定",isCancelBtnShow:!1,callBack:function(){t.changeTabName(e)}};xxwsWindowObj.xxwsAlert(a)}else xxwsWindowObj.xxwsAlert("设置默认模板失败")},error:function(){xxwsWindowObj.xxwsAlert("设置默认模板失败")}})},changeTabName:function(e){"0"==e?($(".aTitle ul li").eq(0).text("系统模板（默认）"),$(".aTitle ul li").eq(1).text("自定义模板")):($(".aTitle ul li").eq(0).text("系统模板"),$(".aTitle ul li").eq(1).text("自定义模板（默认）"))}};$(function(){systemConfiguration.init()});