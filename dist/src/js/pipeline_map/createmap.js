!function(){function n(n){if(!n.sNodeId)return void console.error("配置参数缺少： sNodeId");var e={sNodeId:"",zoomLevel:15,centerPoint:{lon:116.404,lat:39.915},isScroll:!0,aLines:[]};t.extend(e,n),this.initMap(e),this.addControl_scale(),this.addControl_navigation(),this.addControl_mapType()}var t={extend:function(n,t){for(var e in n)n.hasOwnProperty(e)&&t[e]&&(n[e]=t[e])}};n.prototype={constructor:n,initMap:function(n){this.map=new BMap.Map(n.sNodeId,{});var t=new BMap.Point(n.centerPoint.lon,n.centerPoint.lat);this.map.centerAndZoom(t,n.zoomLevel),this.map.enableScrollWheelZoom(n.isScroll),this.startMarker=this.create_icon({sSrc:"/src/images/map/icon_start.png",nWidth:30,nHeight:42,nLeft:0,nTop:0}),this.endMarker=this.create_icon({sSrc:"/src/images/map/icon_end.png",nWidth:30,nHeight:42,nLeft:0,nTop:0})},addControl_scale:function(){var n=new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});this.map.addControl(n)},addControl_navigation:function(){var n=new BMap.NavigationControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL});this.map.addControl(n)},addControl_mapType:function(){this.map.addControl(new BMap.MapTypeControl)},create_icon:function(n){return new BMap.Icon(n.sSrc||"/src/images/map/icon_end.png",new BMap.Size(n.nWidth||30,n.nHeight||42),{anchor:new BMap.Size(n.nLeft||15,n.nTop||42)})},draw_line:function(n,t,e){e||(n=n.map(function(n,t,e){return new BMap.Point(n.bdLon,n.bdLat)}));var o={strokeColor:t.strokeColor||"blue",strokeWeight:t.strokeWeight||2,strokeStyle:t.strokeStyle||"solid",strokeOpacity:t.strokeOpacity||.5,enableEditing:t.enableEditing||!1},a=new BMap.Polyline(n,o);return this.map.addOverlay(a),a},draw_pointMarker:function(n,t,e){var o=new BMap.Marker(new BMap.Point(n,t),{icon:e});return this.map.addOverlay(o),o},clearOverlays:function(){this.map.clearOverlays()},getDistance:function(n,t){var e=this;if(!n||n.length<2)return 0;var o=0;return n.forEach(function(n,a,r){if(0!==a){var i,c;t?(i=r[a-1],c=n):(i=new BMap.Point(r[a-1].bdLon,r[a-1].bdLat),c=new BMap.Point(n.bdLon,n.bdLat)),o+=e.map.getDistance(i,c)}}),o}},window.createMap=function(t){return new n(t)}}();