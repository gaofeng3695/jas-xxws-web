function code(){var s=["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m","0","1","2","3","4","5","6","7","8","9","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],e=parseInt(1e4*Math.random()%62),o=parseInt(1e4*Math.random()%62),t=parseInt(1e4*Math.random()%62),a=parseInt(1e4*Math.random()%62);imgStr=s[e]+s[o]+s[t]+s[a],$(".code i").text(imgStr)}function times(){var s=60;g=!0,c=!0;var e=setInterval(function(){s--,$(".styles").text(s+"秒后再次获取"),s<1&&($(".styles").text("重新获取"),$(".styles").css({background:"#49CB86"}),clearInterval(e),f=!0,g=!1)},1e3)}function jumpto(){var s=5,e=setInterval(function(){s--,s<1&&(clearInterval(e),location.href="main.html"),$(".jumpTo").text(s)},1e3)}function zhugeIdentify(s){zhuge.identify(s.objectId,{name:s.userName,gender:s.sex,age:s.age,email:s.email,qq:s.qq,weixin:s.wechat,mobile:s.mobileNum,"企业名称":null==s.enterpriseName?"":s.enterpriseName,"部门名称":null==s.orgName?"":s.orgName})}var d=!1,e=!1,h=!1,g=!1,b=!1,f=!1,c=!1;$(".btn1").click(function(){var s=$(".phone").val().trim();if(""==s||null==s)return $(".phoneMeg").css({display:"block"}),$(".phoneMeg span").text("手机号码不能为空"),void(e=!1);var o=$(".imgCode").val();if(""==o||null==o)return $(".imgMeg").css({display:"block"}),$(".imgMeg span").text("图片验证码不能为空"),void(f=!1);if($(".phone").blur(),e&&($(".imgCode").blur(),f)){var t=$(".SMScode").val();if(""==t||null==t)return $(".SMScodeMsg").css({display:"block"}),$(".SMScodeMsg span").text("短信验证码不能为空"),void(d=!1);if($(".SMScode").blur(),d){if(!c)return $(".SMScodeMsg span").text("请先获取验证码"),void $(".SMScodeMsg").css({display:"block"});$(".SMScodeMsg").css({display:"none"});var a={sendNum:s,sendMode:1,verifyCode:t};$.ajax({type:"GET",url:"/cloudlink-core-framework/login/checkVerifyCode",contentType:"application/json",data:a,dataType:"json",success:function(s,o){if(1!=s.success)return $(".SMScodeMsg").css({display:"block"}),void $(".SMScodeMsg span").text("手机号或验证码错误");$(".top img").attr("src","/src/images/enrollImg/2.png"),$(".bottom1,.bottom3,.bottom4,.Notes").css({display:"none"}),$(".bottom2").css({display:"block"}),e=!1,d=!1,g=!1,f=!1,1==zhugeSwitch&&zhuge.track("注册填写手机信息完成")}})}}}),$(".btn2").click(function(){var s=$(".userName").val().trim(),o=$(".password1").val().trim(),t=$(".password2").val().trim();return""==s||null==s?($(".nameMsg").css({display:"block"}),$(".nameMsg span").text("姓名不能为空"),void(e=!1)):""==o||null==o?($(".pswMsg1").css({display:"block"}),$(".pswMsg1 span").text("密码不能为空"),void(f=!1)):""==t||null==t?($(".pswMsg2").css({display:"block"}),$(".pswMsg2 span").text("请再次输入密码"),void(g=!1)):($(".userName").blur(),void(e&&($(".password1").blur(),f&&($(".password2").blur(),g&&($(".email").blur(),h&&($(".top img").attr("src","src/images/enrollImg/3.png"),$(".bottom1,.bottom2,.bottom4").css({display:"none"}),$(".bottom3,.Notes").css({display:"block"}),e=!1,f=!1,g=!1,h=!1,1==zhugeSwitch&&zhuge.track("注册信息完善完成")))))))}),$(".btn3").click(function(){var s=$(".phone").val().trim(),e=$(".userName").val().trim(),o=MD5($(".password1").val().trim()),t=$(".companyName").val().trim();if(""==t||null==t)return $(".companyMsg").css({display:"block"}),$(".companyMsg span").text("企业名称不能为空"),void(b=!1);if($(".companyName").blur(),b){var a=$(".companyScale").val();if(0==a)return $(".companyTs").css({display:"block"}),void $(".companyTs span").text("请选择公司规模");$(".companyTs").css({display:"none"});var n=$(".companyRole").val();if("请选择"==n)return $(".roleTs").css({display:"block"}),void $(".roleTs span").text("请选择角色");$(".roleTs").css({display:"none"});var i={mobileNum:s,userName:e,password:o,enterpriseName:t,enterpriseScale:a,roleIds:n};$.ajax({url:"/cloudlink-core-framework/login/registAndLogin",type:"POST",contentType:"application/json",data:JSON.stringify(i),dataType:"json",success:function(s){if(1==s.success){console.log(s);var e=s.rows,o=s.token;lsObj.setLocalStorage("token",o),lsObj.setLocalStorage("userBo",JSON.stringify(e[0])),lsObj.setLocalStorage("timeOut",(new Date).getTime()+828e5),1==zhugeSwitch&&(zhugeIdentify(e[0]),zhuge.track("注册完成并登陆成功"))}else xxwsWindowObj.xxwsAlert("注册失败"),1==zhugeSwitch&&zhuge.track("注册失败")}}),$(".top img").attr("src","src/images/enrollImg/4.png"),$(".bottom1,.bottom2,.bottom3,.Notes").css({display:"none"}),$(".bottom4").css({display:"block"}),jumpto()}}),$(".btn4").click(function(){location.href="main.html"}),$(".phone").blur(function(){var s=$(this).val().trim(),o=/^1\d{10}$/;if(""==s||null==s)return void(e=!1);if(!o.test(s))return $(".phoneMeg").css({display:"block"}),$(".phoneMeg span").text("手机号码填写错误"),e=!1,!1;$(".phoneMeg").css({display:"none"});var t={registNum:s};$.ajax({url:"/cloudlink-core-framework/login/isExist",type:"GET",contentType:"application/json",data:t,dataType:"json",success:function(s,o){1==s.rows.isExist?($(".phoneMeg").css({display:"block"}),$(".phoneMeg span").text("手机号码已注册"),e=!1):($(".phoneMeg").css({display:"none"}),e=!0)},error:function(){}})});var imgStr="";code(),$(".code").click(function(){code()}),$(".imgCode").blur(function(){var s=$(this).val().trim(),e=new RegExp("^"+imgStr+"$","gi");return console.log(e),""==s||null==s?void(f=!1):e.test(s)?($(".imgMeg").css({display:"none"}),g||$(".styles").css({background:"#49CB86"}),f=!0,void 0):($(".imgMeg").css({display:"block"}),$(".imgMeg span").text("图片验证码填写错误"),void(f=!1))}),$(".SMScode").blur(function(){var s=$(this).val().trim();if(""==s||null==s)return void(d=!1);d=!0,$(".SMScodeMsg").css({display:"none"})}),$(".styles").click(function(){var s=$(".phone").val().trim();if(""==s||null==s)return $(".phoneMeg").css({display:"block"}),void $(".phoneMeg span").text("手机号码不能为空");$(".phone").blur();var o=$(".imgCode").val();if(""==o||null==o)return $(".imgMeg").css({display:"block"}),void $(".imgMeg span").text("图片验证码不能为空");if($(".imgCode").blur(),console.log("aaaaaaaaa"),f&&!g&&e){times(),$(".styles").text("60秒后再次获取"),$(".styles").css({background:"#ccc"}),f=!1;var t=$(".phone").val(),a={sendNum:t,sendMode:1,useMode:3};$.ajax({url:"/cloudlink-core-framework/login/getVerifyCode",type:"GET",contentType:"application/json",dataType:"json",data:a,success:function(s){}})}}),$(".userName").blur(function(){var s=$(".userName").val().trim(),o=/^[\u4E00-\u9FA5A-Za-z0-9]{2,15}$/;return""==s||null==s?void(e=!1):o.test(s)?(e=!0,void $(".nameMsg").css({display:"none"})):($(".nameMsg").css({display:"block"}),$(".nameMsg span").text("姓名格式不正确"),void(e=!1))}),$(".password1").blur(function(){if(!/^[\dA-z]{6,12}$/.test($(this).val().trim()))return $(".pswMsg1").css({display:"block"}),$(".pswMsg1 span").text("密码为6-12位"),void(f=!1);f=!0,$(".pswMsg1").css({display:"none"})}),$(".password2").blur(function(){var s=$(".password1").val().trim(),e=$(this).val().trim();return""==e||null==e?void(g=!1):s!=e?($(".pswMsg2").css({display:"block"}),$(".pswMsg2 span").text("两次输入密码不一致"),void(g=!1)):(g=!0,void $(".pswMsg2").css({display:"none"}))}),$(".email").blur(function(){var s=$(this).val().trim(),e=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;if(""==s||null==s)h=!0,$(".emailMsg").css({display:"none"});else{if(!e.test(s))return $(".emailMsg").css({display:"block"}),$(".emailMsg span").text("请输入正确邮箱格式"),void(h=!1);h=!0,$(".emailMsg").css({display:"none"})}}),$(".companyName").blur(function(){var s=$(".companyName").val().trim(),e=/[\u4e00-\u9fa5a-zA-Z]+$/;if(""==s||null==s)return void(b=!1);if(!e.test(s))return $(".companyMsg").css({display:"block"}),$(".companyMsg span").text("企业名称格式错误"),void(b=!1);$(".companyMsg").css({display:"none"});var o={enterpriseName:s};$.ajax({url:"/cloudlink-core-framework/enterprise/isExist",type:"POST",contentType:"application/json",data:JSON.stringify(o),dataType:"json",success:function(s,e){console.log(s);var o=s.rows[0].isExist;console.log(o),1==o?($(".companyMsg").css({display:"block"}),$(".companyMsg span").text("企业名称已注册"),b=!1):($(".companyMsg").css({display:"none"}),b=!0)}})});